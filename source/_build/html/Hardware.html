

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>?. Hardware &mdash; DroneSwarmTutorial 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/hack.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. Introduction" href="Introduction.html" />
    <link rel="prev" title="?. Information for Internal Collaborators" href="Information for internal collaborators.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> DroneSwarmTutorial
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Information for internal collaborators.html">?. Information for Internal Collaborators</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">?. Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">?.? Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-by-step-procedure-for-preparations-prior-to-autonomous-field-experiments">?.? Step-by-step Procedure for Preparations Prior to Autonomous Field Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-by-step-procedure-autonomous-field-experiments">?.? Step-by-step Procedure Autonomous Field Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rtk-field-setup">?.?.? RTK Field setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-an-experiment">?.?.? Run an Experiment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Prerequisites.html">2. Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="Introduction_to_MRS_Software_Extensions.html">3. Introduction to MRS Software Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Workspace_git_configuration.html">4. Workspace Git configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Introduction_to_visualization.html">5. Introduction to visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Crazyswarm.html">6. Crazyswarm</a></li>
<li class="toctree-l1"><a class="reference internal" href="For_developers.html">For developers</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DroneSwarmTutorial</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>?. Hardware</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Hardware.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hardware">
<span id="id1"></span><h1>?. Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>?.? Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="step-by-step-procedure-for-preparations-prior-to-autonomous-field-experiments">
<h2>?.? Step-by-step Procedure for Preparations Prior to Autonomous Field Experiments<a class="headerlink" href="#step-by-step-procedure-for-preparations-prior-to-autonomous-field-experiments" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Prepare the simulations.</li>
<li>Prepare the scripts for the real hardware tests.</li>
<li>Make a planning for the test day. See example document. TODO ADD</li>
<li>Charge everything: transmitter, RTK base, drone batteries.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="step-by-step-procedure-autonomous-field-experiments">
<h2>?.? Step-by-step Procedure Autonomous Field Experiments<a class="headerlink" href="#step-by-step-procedure-autonomous-field-experiments" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="rtk-field-setup">
<h2>?.?.? RTK Field setup<a class="headerlink" href="#rtk-field-setup" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Connect the ground station computer to the WiFi of the router.</li>
<li>Setup the base at the desired location and make sure it is perfectly leveled.</li>
<li>Power the base.</li>
<li>After about 2 minutes you can browse on the base URL</li>
<li>Once connected to the base, in the ‘base mode’ tab, base coordinates section, make sure to set the coordinate accumulation time to 5 minutes. Wait untill the process bar is 100% finished.</li>
<li>Put the drone at a desired location and power up the Pixhawk and the on-board computer.</li>
<li>Wait a few minutes for the gps beep and click on gps ‘SWITCH’ knob.</li>
<li><dl class="first docutils">
<dt>Wait 1-5 minutes and try to browse on the rover URL. The issue is that Reach M2 rover cannot connect quickly:</dt>
<dd><ul class="first last">
<li>some students claim it connects faster on some computers;</li>
<li>try rebooting the Reach M2 by replugging the usb cable;</li>
<li>be patient :-)</li>
</ul>
</dd>
</dl>
</li>
<li>Wait for the rover to go from status SINGLE to FLOAT, and finally to FIX. The better the sky visiblity the faster you get a FIX.</li>
<li>From the ground station computer ssh on the on-board computer (i.e. ssh nuc5&#64;&lt;hostname or ip&gt;).</li>
<li>cd to your custom configs and sudo nano world_simulation.yaml.</li>
<li>Change the coordinates utm_origin_long and utm_origin_lat to the value of the base position you see inside the rover tab. This should be the about same value as the one in the base mode of the base tab.</li>
<li>In the above process you only need to repeat the steps concerning the rover (not the base if it is not powered off) each time you plug out the drone’s batteries.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="run-an-experiment">
<h2>?.?.? Run an Experiment<a class="headerlink" href="#run-an-experiment" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>At each new test moment, follow the steps below but first always run the basic examples i.e. just_flying_rtk.sh and the last script you tested before.</li>
<li>From the ground station computer ssh on the on-board computer (i.e. ssh nuc5&#64;&lt;hostname or ip&gt;).</li>
<li>cd to your testing folder.</li>
<li>Run the command tmux kill-server to be sure no other session are active.</li>
<li>Run your tmux scripts for the real hardware (not simulation), i.e. ./ TAB TAB ENTER.</li>
<li>Yuo should know that for exiting the session you can run: ctrl + c and then ctrl + a and k. If you directly do ctrl + a and k, you will have to ssh again into to the on-board computer.</li>
<li>Check if any tabs crashed. Move accross all tabs by ctrl + a and n. If crashes occured try restarting the session, if they remain crashed, solve the issue.</li>
<li>The status should show stable and reasonable odometry values for the odometry source you use. Do not continue when this is not the case!</li>
<li>We advise for each new test moment and location to do the folowng steps once: move the drone above the base and check if the x and y should be 0 with 5cm error for RTK. The RTK z value of the drone should be about 20cm when on te ground and about 1.5m when above the base. Now find out the x and y axis of the world frame and mark them (e.g. [0 5] and [5 0]. These axes will always be parallel independent of the orientation of the base. Measure the distance from these 2 points till base. This should be 5m with a 5cm error for RTK.</li>
<li><dl class="first docutils">
<dt>DANGER: if the status tab displays strong oscillations or jumps in the odometry values do not continue. This issue can also suddenly occur during flight, the safety pilot should immediately land the drone in this case. Pontetial solutions (no guarantees):</dt>
<dd><ul class="first last">
<li>Check if the pixhawk gps is still blinking green (fix). Click on the gps ‘SWITCH’ knob to make it fix.</li>
<li>Start the session again.</li>
<li>Check if the baudrates are set correctly.</li>
<li>Replug the Pixhawk.</li>
<li>Replug the Reach M2 and follow the standard steps to get RTK FIX.</li>
</ul>
</dd>
</dl>
</li>
<li>When you have an RTK fix, on the right of the status tab should be displayed ‘L1_int’.</li>
<li><dl class="first docutils">
<dt>When the odometry is correct the safety pilot can takeoff the drone.</dt>
<dd><ul class="first last">
<li>The same procedure as for manual flight with some differences.</li>
<li>After the drone is ARMED and the props start spinning, toggle the OFFBOARD switch. Immediately set the throttle to a value of the hover thrust (e.g. 57%). The latter is important when taking back manual control so the drone does not fall down. After a few sconds the thrust will increase and the drone will takeoff.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Introduction.html" class="btn btn-neutral float-right" title="1. Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Information for internal collaborators.html" class="btn btn-neutral float-left" title="?. Information for Internal Collaborators" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BruBotics.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>